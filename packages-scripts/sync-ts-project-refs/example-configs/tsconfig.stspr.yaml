# yaml-language-server: $schema=../schemas/tsconfig.stspr.schema.json

# =============================================================================
# TypeScript Config-level Configuration for Sync TypeScript Project References
# =============================================================================
#
# This file configures how the sync-ts-project-refs tool handles a specific
# TypeScript configuration file within a package.
#
# Naming Convention:
# - For tsconfig.json: tsconfig.stspr.yaml
# - For tsconfig.build.json: tsconfig.build.stspr.yaml
# - For tsconfig.test.json: tsconfig.test.stspr.yaml
# - For any tsconfig.{name}.json: tsconfig.{name}.stspr.yaml
#
# Place this file in the same directory as the corresponding tsconfig.json file.
#
# This configuration allows fine-grained control over individual TypeScript
# configurations, which is useful when you have multiple tsconfig files for
# different purposes (build, test, IDE, etc.).
#
# =============================================================================

# -----------------------------------------------------------------------------
# TypeScript Configuration Exclusion
# -----------------------------------------------------------------------------

# Whether to exclude this specific TypeScript configuration from processing
# When true, this tsconfig file will be completely ignored by the sync tool:
# - It won't be processed for project references
# - Other packages won't reference this specific tsconfig
# - It won't be included in sibling tsconfig references within the same package
#
# Default: false
#
# Use cases:
# - Legacy tsconfig files that shouldn't be part of the project reference graph
# - Experimental or temporary configurations
# - Configurations that are manually managed
# - Build configurations that conflict with the reference system
#
# This replaces the old tsconfig.*.nosync.*.json naming pattern
exclude-this-tsconfig: false

# -----------------------------------------------------------------------------
# Config-specific Reference Management
# -----------------------------------------------------------------------------

# Additional TypeScript project references to include for this specific tsconfig
# These references will ONLY be added to this particular TypeScript configuration,
# not to other tsconfig files in the same package.
#
# Format: Array of objects with 'path' property
# Paths are relative to the directory containing this tsconfig file
#
# Use cases:
# - Test configurations that need additional test utilities
# - Build configurations that need build-specific dependencies
# - IDE configurations that need additional type definitions
# - Specialized configurations with unique requirements
extra-refs:
  # Example: Test-specific utilities (for tsconfig.test.stspr.yaml)
  - { path: '../../test-utils/tsconfig.json' }

  # Example: Build-specific configuration (for tsconfig.build.stspr.yaml)
  - { path: '../../build-tools/tsconfig.json' }

  # Example: IDE-specific type definitions (for tsconfig.tsserver.stspr.yaml)
  - { path: '../../types/global-types/tsconfig.json' }

  # Example: External package reference
  # - { path: '../../../external-packages/shared-interfaces/tsconfig.json' }

# TypeScript project references to explicitly skip/exclude for this specific tsconfig
# These references will be removed from this particular TypeScript configuration
# even if they would normally be included through workspace dependencies or package-level config
#
# Format: Array of objects with 'path' property
# Paths are relative to the directory containing this tsconfig file
#
# Use cases:
# - Build configs that shouldn't include test dependencies
# - Test configs that shouldn't include production-only dependencies
# - IDE configs that need to exclude problematic packages
# - Resolving circular dependencies for specific configurations
skip-refs:
  # Example: Build config excluding test dependencies
  - { path: '../test-package/tsconfig.json' }

  # Example: Test config excluding production dependencies
  - { path: '../production-only-package/tsconfig.json' }

  # Example: Excluding a package that causes issues in this specific config
  - { path: '../problematic-for-this-config/tsconfig.json' }

  # Example: IDE config excluding build-time-only packages
  # - { path: '../build-time-only/tsconfig.json' }

# -----------------------------------------------------------------------------
# Common Configuration Scenarios
# -----------------------------------------------------------------------------

# Scenario 1: Test Configuration (tsconfig.test.stspr.yaml)
# -----------------------------------------------------------
# exclude-this-tsconfig: false
# extra-refs:
#   - { path: '../../test-utils/tsconfig.json' }
#   - { path: '../../jest-config/tsconfig.json' }
# skip-refs:
#   - { path: '../production-only-package/tsconfig.json' }

# Scenario 2: Build Configuration (tsconfig.build.stspr.yaml)
# ------------------------------------------------------------
# exclude-this-tsconfig: false
# extra-refs:
#   - { path: '../../build-tools/tsconfig.json' }
# skip-refs:
#   - { path: '../test-utils/tsconfig.json' }
#   - { path: '../dev-only-package/tsconfig.json' }

# Scenario 3: IDE Configuration (tsconfig.tsserver.stspr.yaml)
# ------------------------------------------------------------
# exclude-this-tsconfig: false
# extra-refs:
#   - { path: '../../types/global-types/tsconfig.json' }
#   - { path: '../../dev-tools/tsconfig.json' }
# skip-refs: []  # Usually include everything for better IDE support

# Scenario 4: Legacy/Problematic Configuration
# --------------------------------------------
# exclude-this-tsconfig: true  # Completely ignore this config
# extra-refs: []
# skip-refs: []

# -----------------------------------------------------------------------------
# Configuration Inheritance and Priority
# -----------------------------------------------------------------------------
#
# The tool applies configurations in this order (later overrides earlier):
#
# 1. Default behavior (workspace dependencies â†’ project references)
# 2. Package-level configuration (stspr.package.yaml)
# 3. TypeScript config-level configuration (this file)
#
# This means:
# - Config-level skip-refs can override package-level extra-refs
# - Config-level extra-refs are added to package-level extra-refs
# - Config-level exclusion (exclude-this-tsconfig) takes precedence
#
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Debugging and Validation Tips
# -----------------------------------------------------------------------------
#
# 1. Use --verbose flag to see how your configuration affects reference generation:
#    tsx sync-ts-project-refs --verbose --dry-run
#
# 2. Check the generated references in your tsconfig files after running the tool
#
# 3. Use --dry-run to preview changes before applying them:
#    tsx sync-ts-project-refs --dry-run
#
# 4. The tool validates configuration using Zod schemas, so you'll get clear
#    error messages for invalid configurations
#
# 5. Remember that paths in this file are relative to the tsconfig file's directory,
#    not the package root
#
# =============================================================================
